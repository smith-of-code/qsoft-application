{"version":3,"file":"component.bundle.js","sources":["../../../mixins/NumberFormatMixin.js","../src/component.js"],"sourcesContent":["export default {\n    methods: {\n        formatNumber(number, useDecimals = false) {\n            if (!number) return 0;\n            number = Math.round(parseFloat(number));\n            let result = number.toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g, '$&\\u00A0');\n            return useDecimals ? result : result.substring(0, result.length - 3);\n        },\n    },\n};\n","import NumberFormatMixin from \"../../../mixins/NumberFormatMixin\";\n\nexport const OrdersReport = {\n    mixins: [NumberFormatMixin],\n\n    data() {\n        return {\n            label: this.isGroup ? 'групповых' : 'личных',\n            label2: this.isGroup ? 'группового' : 'личного',\n        };\n    },\n\n    props: {\n        ordersReport: {\n            type: Object,\n            required: true,\n        },\n        isGroup: {\n            type: Boolean,\n            default: false,\n        },\n    },\n\n    methods: {\n        showPriceWhole(item) {\n            const number = parseFloat(item);\n            const numberFloor = Math.floor(number);\n            return numberFloor.toLocaleString('ru-RU', {minimumFractionDigits: 0});\n        },\n  \n        showPriceRemains(item) {\n            const number = parseFloat(item);\n            const numberFixed = number.toFixed(2);\n            const totalRemains = numberFixed.toString().split('.')[1];\n           \n            if (totalRemains === \"00\") {\n                return \n            } else {\n                return ',' + totalRemains\n            }\n        }\n      },\n      \n    template: `\n        <div class=\"participant__block\">\n            <!--Результаты-->\n            <div class=\"results\">\n                <ul class=\"results__list\">\n                    <li class=\"results__item\">\n                        <!--Результат-->\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Сумма всех {{ label }} заказов</p>\n                                <p class=\"result__total\">{{ formatNumber(ordersReport.total_sum) }} ₽</p>\n                            </div>\n                        </div>\n                        <!--/Результат-->\n                    </li>\n\n                    <li class=\"results__item\">\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Сумма {{ label }} заказов за текущий отчетный период</p>\n                                <p class=\"result__total\">{{ formatNumber(ordersReport.current_period_sum) }} ₽</p>\n                            </div>\n                        </div>\n                    </li>\n\n                    <li v-if=\"ordersReport.current_period_bonuses\" class=\"results__item\">\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Сумма {{ label }} баллов за текущий период</p>\n                                <p class=\"result__total\">{{ formatNumber(ordersReport.current_period_bonuses, false) }} ББ</p>\n                            </div>\n                        </div>\n                    </li>\n\n                    <li class=\"results__item\">\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Количество {{ label }} заказов со статусом «Оплачен»</p>\n                                <p class=\"result__total\">{{ formatNumber(ordersReport.paid_orders_count, false) }}</p>\n                            </div>\n                        </div>\n                    </li>\n\n                    <li class=\"results__item\">\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Количество {{ label }} заказов со статусом «Возврат»</p>\n                                <p class=\"result__total\">\n                                    {{ formatNumber(Number(ordersReport.part_refunded_orders_count) + Number(ordersReport.full_refunded_orders_count), false) }}\n                                </p>\n                            </div>\n                            <div class=\"result__addition\">\n                                <div data-toggle-visibility-container>\n                                    <button type=\"button\" class=\"button button--simple button--gray button--small\" data-toggle-visibility-action=\"hide\">\n                                        <span class=\"button__icon button__icon--mini button__icon--right\">\n                                            <svg class=\"icon icon--arrow-up\">\n                                                <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-arrow-down\"></use>\n                                            </svg>\n                                        </span>\n                                        <span class=\"button__text\" data-toggle-visibility-action-text=\"{&quot;show&quot;:&quot;Показать детализацию&quot;, &quot;hide&quot;:&quot;Скрыть детализацию&quot;}\">Показать детализацию</span>\n                                    </button>\n\n                                    <div data-toggle-visibility-block style=\"display: none;\">\n                                        <!--Возвраты-->\n                                        <div class=\"result__return\">\n                                            <div class=\"result__return-item\">\n                                                <p class=\"result__return-name\">Количество полных возвратов</p>\n                                                <p class=\"result__return-total\">\n                                                    {{ formatNumber(ordersReport.full_refunded_orders_count, false) }}\n                                                </p>\n                                            </div>\n                                            <div class=\"result__return-item\">\n                                                <p class=\"result__return-name\">Количество частичных возвратов</p>\n                                                <p class=\"result__return-total\">\n                                                    {{ formatNumber(ordersReport.part_refunded_orders_count, false) }}\n                                                </p>\n                                            </div>\n                                        </div>\n                                        <!--/Возвраты-->\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </li>\n\n                    <li v-if=\"ordersReport.last_order_date\" class=\"results__item\">\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Дата последнего {{ label2 }} заказа</p>\n                                <p class=\"result__total\">{{ ordersReport.last_order_date }}</p>\n                            </div>\n                        </div>\n                    </li>\n\n                    <li v-if=\"ordersReport.last_month_products.length\" class=\"results__item\">\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Количество товаров со всех {{ label }} заказов за последний месяц</p>\n                                <p class=\"result__total\">{{ ordersReport.last_month_products.length }}</p>\n                            </div>\n                            <div class=\"result__addition\">\n                                <div data-toggle-visibility-container>\n                                    <button type=\"button\" class=\"button button--simple button--gray button--small\" data-toggle-visibility-action=\"hide\">\n                                        <span class=\"button__icon button__icon--mini button__icon--right\">\n                                            <svg class=\"icon icon--arrow-up\">\n                                                <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-arrow-down\"></use>\n                                            </svg>\n                                        </span>\n                                        <span class=\"button__text\" data-toggle-visibility-action-text=\"{&quot;show&quot;:&quot;Показать детализацию&quot;, &quot;hide&quot;:&quot;Скрыть детализацию&quot;}\">Показать детализацию</span>\n                                    </button>\n                                    <!--Таблица товаров-->\n                                    <div class=\"result__products table-list\" data-toggle-visibility-block style=\"display: none;\">\n                                        <div class=\"table-list__head\">\n                                            <div class=\"table-list__cell\">\n                                                <p class=\"table-list__name\">\n                                                    Наименование\n                                                </p>\n                                            </div>\n                                            <div class=\"table-list__cell table-list__cell--desktop\">\n                                                <p class=\"table-list__name\">\n                                                    Цена\n                                                </p>\n                                            </div>\n                                            <div class=\"table-list__cell table-list__cell--desktop\">\n                                                <p class=\"table-list__name\">\n                                                    Количество\n                                                </p>\n                                            </div>\n                                            <div class=\"table-list__cell table-list__cell--desktop\">\n                                                <p class=\"table-list__name\">\n                                                    Сумма\n                                                </p>\n                                            </div>\n                                        </div>\n\n                                        <ul class=\"table-list__list table-list__list--limited\" data-scrollbar>\n                                            <li v-for=\"product in ordersReport.last_month_products\" :key=\"product.article\" class=\"table-list__item\">\n                                                <article class=\"product-line\">\n                                                    <a class=\"product-line__link\" :href=\"product.link\"></a>\n                                                    <div class=\"product-line__inner\">\n                                                        <div class=\"product-line__info\">\n                                                            <div class=\"product-line__image\">\n                                                                <img :src=\"product.picture\" alt=\"#\" class=\"product-line__image-picture\">\n                                                            </div>\n                                                            <div class=\"product-line__wrapper\">\n                                                                <h2 class=\"product-line__title\">\n                                                                    {{ product.name }}\n                                                                </h2>\n                                                                <p class=\"product-line__subtitle\">\n                                                                    Арт. {{ product.article }}\n                                                                </p>\n                                                            </div>\n                                                        </div>\n                                                        <div class=\"product-line__characteristic\">\n                                                            <ul class=\"product-line__list\">\n                                                                <li class=\"product-line__params product-line__params--span\">\n                                                                    <p class=\"product-line__text\">\n                                                                        <span class=\"product-line__params-name\">\n                                                                            Цена:\n                                                                        </span>\n                                                                        <span class=\"product-line__params-value\">\n                                                                            <span class=\"product-line__params-value--whole\">\n                                                                                {{ showPriceWhole(product.price) }}\n                                                                            </span>\n                                                                            <span class=\"product-line__params-value--remains\">\n                                                                                {{ showPriceRemains(product.price) }}&nbsp;₽\n                                                                            </span>\n                                                                        </span>\n                                                                    </p>\n                                                                </li> \n                                                                <li class=\"product-line__params\">\n                                                                    <p class=\"product-line__text\">\n                                                                        <span class=\"product-line__params-name\">\n                                                                            Количество:\n                                                                        </span>\n                                                                        <span class=\"product-line__params-value\">\n                                                                            {{ product.quantity }}\n                                                                        </span>\n                                                                    </p>\n                                                                </li> \n                                                                <li class=\"product-line__params product-line__params--bold\">\n                                                                    <p class=\"product-line__text\">\n                                                                        <span class=\"product-line__params-name\">\n                                                                            Сумма:\n                                                                        </span>\n                                                                        <span class=\"product-line__params-value\">\n                                                                            <span class=\"product-line__params-value--whole\">\n                                                                                {{ showPriceWhole(product.price * product.quantity) }}\n                                                                            </span>\n                                                                            <span class=\"product-line__params-value--remains\">\n                                                                                {{ showPriceRemains(product.price * product.quantity) }}&nbsp;₽\n                                                                            </span>\n                                                                        </span>\n                                                                    </p>\n                                                                </li> \n                                                            </ul>\n                                                        </div>\n                                                    </div>\n                                                </article>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                    <!--/Таблица товаров-->\n                                </div>\n                            </div>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n            <!--Результаты-->\n        </div>\n    `\n};"],"names":["methods","formatNumber","number","useDecimals","Math","round","parseFloat","result","toFixed","replace","substring","length","OrdersReport","mixins","NumberFormatMixin","data","label","isGroup","label2","props","ordersReport","type","Object","required","Boolean","showPriceWhole","item","numberFloor","floor","toLocaleString","minimumFractionDigits","showPriceRemains","numberFixed","totalRemains","toString","split","template"],"mappings":";;;;AAAA,4BAAe;MACXA,OAAO,EAAE;QACLC,YADK,wBACQC,MADR,EACqC;UAAA,IAArBC,WAAqB,uEAAP,KAAO;UACtC,IAAI,CAACD,MAAL,EAAa,OAAO,CAAP;UACbA,MAAM,GAAGE,IAAI,CAACC,KAAL,CAAWC,UAAU,CAACJ,MAAD,CAArB,CAAT;UACA,IAAIK,MAAM,GAAGL,MAAM,CAACM,OAAP,CAAe,CAAf,EAAkBC,OAAlB,CAA0B,mBAA1B,EAA+C,QAA/C,CAAb;UACA,OAAON,WAAW,GAAGI,MAAH,GAAYA,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBH,MAAM,CAACI,MAAP,GAAgB,CAApC,CAA9B;;;IANG,CAAf;;QCEaC,YAAY,GAAG;MACxBC,MAAM,EAAE,CAACC,iBAAD,CADgB;MAGxBC,IAHwB,kBAGjB;QACH,OAAO;UACHC,KAAK,EAAE,KAAKC,OAAL,GAAe,WAAf,GAA6B,QADjC;UAEHC,MAAM,EAAE,KAAKD,OAAL,GAAe,YAAf,GAA8B;SAF1C;OAJoB;MAUxBE,KAAK,EAAE;QACHC,YAAY,EAAE;UACVC,IAAI,EAAEC,MADI;UAEVC,QAAQ,EAAE;SAHX;QAKHN,OAAO,EAAE;UACLI,IAAI,EAAEG,OADD;UAEL,WAAS;;OAjBO;MAqBxBxB,OAAO,EAAE;QACLyB,cADK,0BACUC,IADV,EACgB;UACjB,IAAMxB,MAAM,GAAGI,UAAU,CAACoB,IAAD,CAAzB;UACA,IAAMC,WAAW,GAAGvB,IAAI,CAACwB,KAAL,CAAW1B,MAAX,CAApB;UACA,OAAOyB,WAAW,CAACE,cAAZ,CAA2B,OAA3B,EAAoC;YAACC,qBAAqB,EAAE;WAA5D,CAAP;SAJC;QAOLC,gBAPK,4BAOYL,IAPZ,EAOkB;UACnB,IAAMxB,MAAM,GAAGI,UAAU,CAACoB,IAAD,CAAzB;UACA,IAAMM,WAAW,GAAG9B,MAAM,CAACM,OAAP,CAAe,CAAf,CAApB;UACA,IAAMyB,YAAY,GAAGD,WAAW,CAACE,QAAZ,GAAuBC,KAAvB,CAA6B,GAA7B,EAAkC,CAAlC,CAArB;;UAEA,IAAIF,YAAY,KAAK,IAArB,EAA2B;YACvB;WADJ,MAEO;YACH,OAAO,MAAMA,YAAb;;;OApCY;MAyCxBG,QAAQ;IAzCgB,CAArB;;;;;;;;"}