{"version":3,"file":"component.bundle.js","sources":["../../../stores/loyaltySalesReportStore.js","../../../mixins/NumberFormatMixin.js","../../loyaltyStatusTale/src/component.js","../../ordersReport/src/component.js","../../loyaltyReport/src/component.js","../src/component.js"],"sourcesContent":["import { defineStore } from 'ui.vue3.pinia';\n\nexport const useLoyaltySalesReportStore = defineStore('loyaltySalesReport', {\n    actions: {\n        async getDataByPeriod(from, to) {\n            return await BX.ajax.runComponentAction('zolo:loyalty.sales.report', 'getDataByPeriod', {\n                mode: 'class',\n                data: { from, to },\n            });\n        },\n        async getTeamMembersDataByPeriod(ids, from, to) {\n            return await BX.ajax.runComponentAction('zolo:loyalty.sales.report', 'getTeamMembersDataByPeriod', {\n                mode: 'class',\n                data: { ids, from, to },\n            });\n        },\n    },\n})","export default {\n    methods: {\n        formatNumber(number, useDecimals = false) {\n            if (!number) return 0;\n            number = Math.round(parseFloat(number));\n            let result = number.toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g, '$&\\u00A0');\n            return useDecimals ? result : result.substring(0, result.length - 3);\n        },\n    },\n};\n","import NumberFormatMixin from \"../../../mixins/NumberFormatMixin\";\n\nexport const LoyaltyStatusTale = {\n    mixins: [NumberFormatMixin],\n\n    props: {\n        currentValue: {\n            type: Number,\n            required: true,\n        },\n        targetValue: {\n            type: Number,\n            required: true,\n        },\n        label: {\n            type: String,\n            required: true,\n        },\n        isHold: {\n            type: Boolean,\n            default: true,\n        },\n        isConsultant: {\n            type: Boolean,\n            default: true,\n        },\n    },\n\n    template: `\n        <div v-if=\"targetValue > 0\" class=\"card-progress card-progress--unbordered\">\n            <div class=\"card-progress__inner\">\n                <p class=\"card-progress__title\">\n                    {{ label }}\n                </p>\n                <div v-if=\"currentValue / targetValue < 0.5\" class=\"card-progress__mark\">\n                    <svg class=\"card-progress__icon icon icon--cat-serious\">\n                        <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-cat-sad\"></use>\n                    </svg>\n                    <span class=\"card-progress__mark-text\">\n                        Нужно больше усилий\n                    </span>\n                </div>\n                <div v-else-if=\"currentValue / targetValue < 1\" class=\"card-progress__mark\">\n                    <svg class=\"card-progress__icon icon icon--cat-serious\">\n                        <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-cat-serious\"></use>\n                    </svg>\n                    <span class=\"card-progress__mark-text\">\n                        Хорошо получается\n                    </span>\n                </div>\n                <div v-else-if=\"currentValue / targetValue == 1\" class=\"card-progress__mark\">\n                    <svg class=\"card-progress__icon icon icon--cat-serious\">\n                        <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-cat-smile\"></use>\n                    </svg>\n                    <span class=\"card-progress__mark-text\">\n                        Цель достигнута\n                    </span>\n                </div>\n                <div v-else class=\"card-progress__mark\">\n                    <svg class=\"card-progress__icon icon icon--cat-serious\">\n                        <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-cat-happy\"></use>\n                    </svg>\n                    <span class=\"card-progress__mark-text\">\n                        Просто фантастика\n                    </span>\n                </div>\n                <div class=\"card-progress__wrapper\">\n                    <div class=\"card-progress__progress progress-bar\">\n                        <div\n                            class=\"progress-bar__filler\"\n                            :style=\"{ width: ((currentValue * 100 / targetValue) < 100 ? (currentValue * 100 / targetValue) : 100) + '%' }\"\n                            :class=\"{ \n                                'progress-bar__filler--green': targetValue - currentValue <= 0,\n                                'progress-bar__filler--red': targetValue - currentValue > 0,\n                             }\"\n                        ></div>\n                    </div>\n                    <div class=\"card-progress__bottom\">\n                        <div class=\"card-progress__amount amount\">\n                            <p\n                                class=\"amount__target\"\n                                :class=\"{\n                                    'amount__target--green': targetValue - currentValue <= 0,\n                                    'amount__target--red': targetValue - currentValue > 0,\n                                }\"\n                            >\n                                {{ formatNumber(currentValue) }} ₽\n                            </p>\n                            <p class=\"amount__total\">\n                                из {{ formatNumber(targetValue) }} ₽\n                            </p>\n                        </div>\n                        <div v-if=\"targetValue - currentValue > 0\" class=\"card-progress__status\">\n                            <p class=\"card-progress__text\">\n                                Осталось {{ formatNumber(targetValue - currentValue) }}&nbsp;₽\n                            </p>\n                        </div>\n                        <div v-else-if=\"targetValue - currentValue == 0\" class=\"card-progress__status\">\n                            <p class=\"card-progress__text\">\n                                Выполнено\n                            </p>\n                        </div>\n                        <div v-else class=\"card-progress__status\">\n                            <p class=\"card-progress__text\">\n                                Перевыполнено на  {{ formatNumber(currentValue - targetValue) }}&nbsp;₽\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"card-progress__warning warning\">\n                    <div class=\"warning__mark\">\n                        <button type=\"button\" class=\"button button--iconed button--simple button--red\" data-fancybox=\"\" data-modal-type=\"modal\" :data-src=\"isHold ? '#hold-conditions' : '#upgrade-conditions'\">\n                            <span class=\"button__icon\">\n                                <svg class=\"icon icon--basket warning__icon\">\n                                    <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-attention\"></use>\n                                </svg>\n                            </span>\n                        </button>\n                    </div>\n                    \n                    <p class=\"warning__text\">\n                        {{ isHold ? isConsultant ? 'Условия поддержания уровня' : 'Условия удержания скидки' : 'Условия повышения уровня' }}\n                    </p>\n                </div>\n                <article v-if=\"isHold\" id=\"hold-conditions\" class=\"modal modal--full box box--circle box--hanging\" style=\"display: none\">\n                    <div class=\"modal__content\">\n                        <header class=\"modal__section modal__section--header\">\n                            <p class=\"heading heading--average\">Условия поддержания уровня</p>\n                        </header>\n\n                        <section class=\"modal__section modal__section--content\">\n                            <div class=\"conditions\">\n                                <div class=\"conditions__block\">\n                                    <h5 class=\"conditions__title\">\n                                        Условия поддержания уровня для {{isConsultant ? \"К1\" : \"В1\"}}:\n                                    </h5>\n                                    <ul class=\"conditions__list\">\n                                        <li class=\"conditions__item\">\n                                            Совершение личных покупок на общую сумму {{ formatNumber(5000) }} рублей за период в 3 последовательных месяца (квартал);\n                                        </li>\n                                    </ul>\n                                </div>\n\n                                <div class=\"conditions__block\">\n                                    <h5 class=\"conditions__title\">\n                                        Условия поддержания уровня для {{isConsultant ? \"К2\" : \"В2\"}} (единовременное соблюдение всех условий):\n                                    </h5>\n\n                                    <ul class=\"conditions__list\">\n                                        <li class=\"conditions__item\">\n                                            Совершение личных покупок на сумму {{ formatNumber(5000) }} рублей каждый месяц за период в 3 последовательных месяца (квартал);\n                                        </li>\n\n                                        <li class=\"conditions__item\">\n                                            Совершение групповых покупок на сумму {{ formatNumber(7000) }} рублей каждый месяц за период в 3 последовательных месяца (квартал);\n                                        </li>\n                                    </ul>\n\n                                    <p class=\"conditions__text\">Переход на уровень {{isConsultant ? \"К2\" : \"В2\"}} возможен в течение 3 последовательных месяцев при соблюдении условий перехода на уровень {{isConsultant ? \"К2\" : \"В2\"}};\n                                    </p>\n                                    <p class=\"conditions__text\">При несоблюдении условий поддержания уровня {{isConsultant ? \"К2\" : \"В2\"}} будет выполняться переход на уровень {{isConsultant ? \"К1\" : \"В1\"}}.</p>\n                                </div>\n\n                                <div class=\"conditions__block\">\n                                    <h5 class=\"conditions__title\">\n                                        Условия поддержания уровня для {{isConsultant ? \"К3\" : \"В3\"}} (единовременное соблюдение всех условий):\n                                    </h5>\n\n                                    <ul class=\"conditions__list\">\n                                        <li class=\"conditions__item\">\n                                            Совершение личных покупок на сумму {{ formatNumber(10000) }} рублей каждый месяц за период в 3 последовательных месяца (квартал);\n                                        </li>\n\n                                        <li class=\"conditions__item\">\n                                            Совершение групповых покупок на сумму {{ formatNumber(20000) }} рублей каждый месяц за период в 3 последовательных месяца (квартал);\n                                        </li>\n                                    </ul>\n\n                                    <p class=\"conditions__text\">Переход на уровень {{isConsultant ? \"К3\" : \"В3\"}} возможен в течение 6 последовательных месяцев при соблюдении условий перехода на уровень {{isConsultant ? \"К3\" : \"В3\"}};\n\n                                    </p>\n                                    <p class=\"conditions__text\">При несоблюдении условий поддержания уровня {{isConsultant ? \"К3\" : \"В3\"}} будет выполняться переход на уровень {{isConsultant ? \"К2\" : \"В2\"}}.</p>\n                                </div>\n                            </div>\n                        </section>\n                    </div>\n                </article>\n                <article v-else id=\"upgrade-conditions\" class=\"modal modal--full box box--circle box--hanging\" style=\"display: none\">\n                    <div class=\"modal__content\">\n                        <header class=\"modal__section modal__section--header\">\n                            <p class=\"heading heading--average\">Условия повышения уровня</p>\n                        </header>\n\n                        <section class=\"modal__section modal__section--content\">\n                            <div class=\"conditions\">\n                                <div class=\"conditions__block\">\n                                    <h5 class=\"conditions__title\">\n                                        Условия повышения уровня до {{isConsultant ? \"К2\" : \"В2\"}} (единовременное соблюдение всех условий):\n                                    </h5>\n\n                                    <ul class=\"conditions__list\">\n                                        <li class=\"conditions__item\">\n                                            Совершение личных покупок на общую сумму {{ formatNumber(10000) }} рублей за период в 3 последовательных месяца (квартал);\n                                        </li>\n\n                                        <li class=\"conditions__item\">\n                                            Совершение групповых покупок на общую сумму {{ formatNumber(10000) }} рублей за период в 3 последовательных месяца (квартал);\n                                        </li>\n                                    </ul>\n\n                                    <p class=\"conditions__text\">Переход на уровень {{isConsultant ? \"К2\" : \"В2\"}} возможен в течение 3 последовательных месяцев при соблюдении условий перехода на уровень {{isConsultant ? \"К2\" : \"В2\"}};</p>\n                                </div>\n\n                                <div class=\"conditions__block\">\n                                    <h5 class=\"conditions__title\">\n                                        Условия повышения уровня до {{isConsultant ? \"К3\" : \"В3\"}} (единовременное соблюдение всех условий):\n                                    </h5>\n\n                                    <ul class=\"conditions__list\">\n                                        <li class=\"conditions__item\">\n                                            Совершение личных покупок на общую сумму {{ formatNumber(50000) }} рублей за период в 6 последовательных месяца (два последовательных квартала);\n                                        </li>\n\n                                        <li class=\"conditions__item\">\n                                            Совершение групповых покупок на общую сумму {{ formatNumber(100000) }} рублей за период в 6 последовательных месяца (два последовательных квартала);\n                                        </li>\n                                    </ul>\n\n                                    <p class=\"conditions__text\">Переход на уровень {{isConsultant ? \"К3\" : \"В3\"}} возможен в течение 6 последовательных месяцев при соблюдении условий перехода на уровень {{isConsultant ? \"К3\" : \"В3\"}};</p>\n                                </div>\n                            </div>\n                        </section>\n                    </div>\n                </article>\n            </div>\n        </div>\n        <div v-else class=\"card-progress card-progress--success card-progress--unbordered\">\n            <div class=\"card-progress__inner card-progress__inner--columed\">\n                <div class=\"card-progress__image\">\n                    <svg class=\"card-progress__image-pic icon icon--cat-cheerful\">\n                        <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-cat-cheerful\"></use>\n                    </svg>\n                </div>\n                <p class=\"card-progress__text\">У Вас максимальный уровень</p>\n            </div>\n        </div>\n    `\n};","import NumberFormatMixin from \"../../../mixins/NumberFormatMixin\";\n\nexport const OrdersReport = {\n    mixins: [NumberFormatMixin],\n\n    data() {\n        return {\n            label: this.isGroup ? 'групповых' : 'личных',\n            label2: this.isGroup ? 'группового' : 'личного',\n        };\n    },\n\n    props: {\n        ordersReport: {\n            type: Object,\n            required: true,\n        },\n        isGroup: {\n            type: Boolean,\n            default: false,\n        },\n    },\n\n    methods: {\n        showPriceWhole(item) {\n            const number = parseFloat(item);\n            const numberFloor = Math.floor(number);\n            return numberFloor.toLocaleString('ru-RU', {minimumFractionDigits: 0});\n        },\n  \n        showPriceRemains(item) {\n            const number = parseFloat(item);\n            const numberFixed = number.toFixed(2);\n            const totalRemains = numberFixed.toString().split('.')[1];\n           \n            if (totalRemains === \"00\") {\n                return \n            } else {\n                return ',' + totalRemains\n            }\n        }\n      },\n      \n    template: `\n        <div class=\"participant__block\">\n            <!--Результаты-->\n            <div class=\"results\">\n                <ul class=\"results__list\">\n                    <li class=\"results__item\">\n                        <!--Результат-->\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Сумма всех {{ label }} заказов</p>\n                                <p class=\"result__total\">{{ formatNumber(ordersReport.total_sum) }} ₽</p>\n                            </div>\n                        </div>\n                        <!--/Результат-->\n                    </li>\n\n                    <li class=\"results__item\">\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Сумма {{ label }} заказов за текущий отчетный период</p>\n                                <p class=\"result__total\">{{ formatNumber(ordersReport.current_period_sum) }} ₽</p>\n                            </div>\n                        </div>\n                    </li>\n\n                    <li v-if=\"ordersReport.current_period_bonuses\" class=\"results__item\">\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Сумма {{ label }} баллов за текущий период</p>\n                                <p class=\"result__total\">{{ formatNumber(ordersReport.current_period_bonuses, false) }} ББ</p>\n                            </div>\n                        </div>\n                    </li>\n\n                    <li class=\"results__item\">\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Количество {{ label }} заказов со статусом «Оплачен»</p>\n                                <p class=\"result__total\">{{ formatNumber(ordersReport.paid_orders_count, false) }}</p>\n                            </div>\n                        </div>\n                    </li>\n\n                    <li class=\"results__item\">\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Количество {{ label }} заказов со статусом «Возврат»</p>\n                                <p class=\"result__total\">\n                                    {{ formatNumber(Number(ordersReport.part_refunded_orders_count) + Number(ordersReport.full_refunded_orders_count), false) }}\n                                </p>\n                            </div>\n                            <div class=\"result__addition\">\n                                <div data-toggle-visibility-container>\n                                    <button type=\"button\" class=\"button button--simple button--gray button--small\" data-toggle-visibility-action=\"hide\">\n                                        <span class=\"button__icon button__icon--mini button__icon--right\">\n                                            <svg class=\"icon icon--arrow-up\">\n                                                <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-arrow-down\"></use>\n                                            </svg>\n                                        </span>\n                                        <span class=\"button__text\" data-toggle-visibility-action-text=\"{&quot;show&quot;:&quot;Показать детализацию&quot;, &quot;hide&quot;:&quot;Скрыть детализацию&quot;}\">Показать детализацию</span>\n                                    </button>\n\n                                    <div data-toggle-visibility-block style=\"display: none;\">\n                                        <!--Возвраты-->\n                                        <div class=\"result__return\">\n                                            <div class=\"result__return-item\">\n                                                <p class=\"result__return-name\">Количество полных возвратов</p>\n                                                <p class=\"result__return-total\">\n                                                    {{ formatNumber(ordersReport.full_refunded_orders_count, false) }}\n                                                </p>\n                                            </div>\n                                            <div class=\"result__return-item\">\n                                                <p class=\"result__return-name\">Количество частичных возвратов</p>\n                                                <p class=\"result__return-total\">\n                                                    {{ formatNumber(ordersReport.part_refunded_orders_count, false) }}\n                                                </p>\n                                            </div>\n                                        </div>\n                                        <!--/Возвраты-->\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </li>\n\n                    <li v-if=\"ordersReport.last_order_date\" class=\"results__item\">\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Дата последнего {{ label2 }} заказа</p>\n                                <p class=\"result__total\">{{ ordersReport.last_order_date }}</p>\n                            </div>\n                        </div>\n                    </li>\n\n                    <li v-if=\"ordersReport.last_month_products.length\" class=\"results__item\">\n                        <div class=\"result\">\n                            <div class=\"result__main\">\n                                <p class=\"result__title\">Количество товаров со всех {{ label }} заказов за последний месяц</p>\n                                <p class=\"result__total\">{{ ordersReport.last_month_products.length }}</p>\n                            </div>\n                            <div class=\"result__addition\">\n                                <div data-toggle-visibility-container>\n                                    <button type=\"button\" class=\"button button--simple button--gray button--small\" data-toggle-visibility-action=\"hide\">\n                                        <span class=\"button__icon button__icon--mini button__icon--right\">\n                                            <svg class=\"icon icon--arrow-up\">\n                                                <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-arrow-down\"></use>\n                                            </svg>\n                                        </span>\n                                        <span class=\"button__text\" data-toggle-visibility-action-text=\"{&quot;show&quot;:&quot;Показать детализацию&quot;, &quot;hide&quot;:&quot;Скрыть детализацию&quot;}\">Показать детализацию</span>\n                                    </button>\n                                    <!--Таблица товаров-->\n                                    <div class=\"result__products table-list\" data-toggle-visibility-block style=\"display: none;\">\n                                        <div class=\"table-list__head\">\n                                            <div class=\"table-list__cell\">\n                                                <p class=\"table-list__name\">\n                                                    Наименование\n                                                </p>\n                                            </div>\n                                            <div class=\"table-list__cell table-list__cell--desktop\">\n                                                <p class=\"table-list__name\">\n                                                    Цена\n                                                </p>\n                                            </div>\n                                            <div class=\"table-list__cell table-list__cell--desktop\">\n                                                <p class=\"table-list__name\">\n                                                    Количество\n                                                </p>\n                                            </div>\n                                            <div class=\"table-list__cell table-list__cell--desktop\">\n                                                <p class=\"table-list__name\">\n                                                    Сумма\n                                                </p>\n                                            </div>\n                                        </div>\n\n                                        <ul class=\"table-list__list table-list__list--limited\" data-scrollbar>\n                                            <li v-for=\"product in ordersReport.last_month_products\" :key=\"product.article\" class=\"table-list__item\">\n                                                <article class=\"product-line\">\n                                                    <a class=\"product-line__link\" :href=\"product.link\"></a>\n                                                    <div class=\"product-line__inner\">\n                                                        <div class=\"product-line__info\">\n                                                            <div class=\"product-line__image\">\n                                                                <img :src=\"product.picture\" alt=\"#\" class=\"product-line__image-picture\">\n                                                            </div>\n                                                            <div class=\"product-line__wrapper\">\n                                                                <h2 class=\"product-line__title\">\n                                                                    {{ product.name }}\n                                                                </h2>\n                                                                <p class=\"product-line__subtitle\">\n                                                                    Арт. {{ product.article }}\n                                                                </p>\n                                                            </div>\n                                                        </div>\n                                                        <div class=\"product-line__characteristic\">\n                                                            <ul class=\"product-line__list\">\n                                                                <li class=\"product-line__params product-line__params--span\">\n                                                                    <p class=\"product-line__text\">\n                                                                        <span class=\"product-line__params-name\">\n                                                                            Цена:\n                                                                        </span>\n                                                                        <span class=\"product-line__params-value\">\n                                                                            <span class=\"product-line__params-value--whole\">\n                                                                                {{ showPriceWhole(product.price) }}\n                                                                            </span>\n                                                                            <span class=\"product-line__params-value--remains\">\n                                                                                {{ showPriceRemains(product.price) }}&nbsp;₽\n                                                                            </span>\n                                                                        </span>\n                                                                    </p>\n                                                                </li> \n                                                                <li class=\"product-line__params\">\n                                                                    <p class=\"product-line__text\">\n                                                                        <span class=\"product-line__params-name\">\n                                                                            Количество:\n                                                                        </span>\n                                                                        <span class=\"product-line__params-value\">\n                                                                            {{ product.quantity }}\n                                                                        </span>\n                                                                    </p>\n                                                                </li> \n                                                                <li class=\"product-line__params product-line__params--bold\">\n                                                                    <p class=\"product-line__text\">\n                                                                        <span class=\"product-line__params-name\">\n                                                                            Сумма:\n                                                                        </span>\n                                                                        <span class=\"product-line__params-value\">\n                                                                            <span class=\"product-line__params-value--whole\">\n                                                                                {{ showPriceWhole(product.price * product.quantity) }}\n                                                                            </span>\n                                                                            <span class=\"product-line__params-value--remains\">\n                                                                                {{ showPriceRemains(product.price * product.quantity) }}&nbsp;₽\n                                                                            </span>\n                                                                        </span>\n                                                                    </p>\n                                                                </li> \n                                                            </ul>\n                                                        </div>\n                                                    </div>\n                                                </article>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                    <!--/Таблица товаров-->\n                                </div>\n                            </div>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n            <!--Результаты-->\n        </div>\n    `\n};","import { useLoyaltySalesReportStore } from '../../../stores/loyaltySalesReportStore';\nimport { LoyaltyStatusTale } from \"../../loyaltyStatusTale/src/component\";\nimport { OrdersReport } from \"../../ordersReport/src/component\";\nimport NumberFormatMixin from \"../../../mixins/NumberFormatMixin\";\n\nlet id = 0;\n\nexport const LoyaltyReport = {\n    components: { LoyaltyStatusTale, OrdersReport },\n\n    mixins: [NumberFormatMixin],\n\n    data() {\n        return {\n            componentId: `loyalty-report${++id}`,\n            mutableLoyaltyStatus: {},\n            mutableBonusesIncome: {},\n            mutableOrdersReport: {},\n        }\n    },\n\n    props: {\n        user: {\n            type: Object,\n            required: true,\n        },\n        ordersReport: {\n            type: Object,\n            required: true,\n        },\n        currentAccountingPeriod: {\n            type: Object,\n            required: true,\n        },\n        accountingPeriods: {\n            type: Array,\n            required: true,\n        },\n        loyaltyStatus: {\n            type: Object,\n            required: true,\n        },\n        bonusesIncome: {\n            type: Object,\n            required: true,\n            default: {}\n        },\n        accordion: {\n            type: Boolean,\n            default: false,\n        },\n        title: {\n            type: String,\n            default: \"Мой заработок\",\n        },\n    },\n\n    setup() {\n        return { loyaltySalesReportStore: useLoyaltySalesReportStore() };\n    },\n\n    created() {\n        this.mutableLoyaltyStatus = this.loyaltyStatus;\n        this.mutableBonusesIncome = this.bonusesIncome;\n        this.mutableOrdersReport = this.ordersReport;\n    },\n\n    mounted() {\n        if (!this.accordion) {\n            $('select[name=accounting_periods]').on('change', () => this.changeAccountingPeriod());\n        }\n    },\n\n    methods: {\n        acceptColor: (label) => {\n            if (label === 'За покупки группы') {\n                return '#945DAB'\n            } else if (label === 'С личных покупок') {\n                return '#2C877F'\n            } else if (label === 'За приглашенных консультантов') {\n                return '#D82F49'\n            } else if (label === 'С товаров по персональной акции') {\n                return '#C73C5E'\n            } else if (label === 'За переход на К1') {\n                return '#D26925'\n            } else if (label === 'За переход на К2') {\n                return '#C99308'\n            } else if (label === 'За переход на К3') {\n                return '#2D8859'\n            } else if (label === 'За удержание на К3') {\n                return '#3887B5'\n            } else {\n                return '#333'\n            }\n        },\n\n        async changeAccountingPeriod(data) {\n            if (!data) {\n                const period = $('select[name=accounting_periods]').val().split('-');\n                const response = await this.loyaltySalesReportStore.getDataByPeriod(period[0], period[1]);\n                data = response.data;\n            }\n\n            this.mutableLoyaltyStatus = data.loyalty_status;\n            this.mutableOrdersReport = data.orders_report;\n            this.mutableBonusesIncome = data.bonuses_income;\n            \n            let component = this;\n            const diagram = $(`#${this.componentId}`)[0];\n            if (diagram) {\n                let dataChart = this.mutableBonusesIncome.js_data;\n                diagram.myChart.data = {\n                    labels: dataChart.labels,\n                    datasets: [\n                        {\n                            data: dataChart.datasets[0].data,\n                            backgroundColor: function(context) {\n                                const value = context.chart.data;\n                                const label = value.labels.map((item, index) => {\n                                    return component.acceptColor(item);\n                                });\n                                return label\n                            },\n                        }\n                    ]\n                }\n                diagram.myChart.update();\n            }\n        },\n    },\n\n    template: `\n        <div :class=\"{ 'accordeon__item': accordion, 'participant__item': accordion, participant: !accordion, 'participant--accounting': !accordion }\" :data-accordeon=\"accordion\">\n            <div class=\"participant__header box box--rounded-sm\" :class=\"{ 'accordeon__header': accordion, 'participant__item': !accordion, 'box--gray': !accordion }\">\n                <div class=\"participant__row\">\n                    <div class=\"participant__col participant__col--avatar\">\n                        <div class=\"participant__avatar avatar avatar--accent avatar--big\">\n                            <div class=\"avatar__box\">\n                                <img :src=\"user.photo\" class=\"avatar__picture\">\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"participant__col participant__col--name\">\n                        <div class=\"participant__info\">\n                            <span class=\"participant__info-name\">ФИО</span>\n                            <span class=\"participant__info-value participant__info-value--truncate participant__info-value--accent\" :data-tippy-content=\"user.name_initials\" data-show-text>{{ user.name_initials }}</span>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"participant__row participant__row--separated\">\n                    <div class=\"participant__col participant__col--id\">\n                        <div class=\"participant__info\">\n                            <span class=\"participant__info-name\">ID</span>\n                            <span class=\"participant__info-value\">{{ user.id }}</span>\n                        </div>\n                    </div>\n\n                    <div v-if=\"user.pets\" class=\"participant__col participant__col--pets\">\n                        <div class=\"participant__info\">\n                            <span class=\"participant__info-name\">Питомец</span>\n                            <div v-if=\"!user.pets.length\" class=\"participant__info-pets\">\n                                <div class=\"participant__info-pet participant__info-pet--none\">\n                                    Нет\n                                </div>\n                            </div>\n                            <div v-else class=\"participant__info-pets\">\n                                <div v-for=\"pet in user.pets\" :key=\"pet\" class=\"participant__info-pet\" :class=\"'participant__info-pet--' + pet\">\n                                    <svg class=\"icon\" :class=\"'icon--' + pet\">\n                                        <use :xlink:href=\"'/local/templates/.default/images/icons/sprite.svg#icon-' + pet + '-seating'\"></use>\n                                    </svg>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                  \n                    <div v-else class=\"participant__col participant__col--level\">\n                        <div class=\"participant__info\">\n                            <span class=\"participant__info-name\">Уровень</span>\n                            <span class=\"participant__info-value\">{{ user.loyalty_level ?  user.loyalty_level : '&nbsp;' }}</span>\n                        </div>\n                    </div>\n\n                    <div class=\"participant__col participant__col--date\">\n                        <div class=\"participant__info\">\n                            <span class=\"participant__info-name\">На сайте с</span>\n                            <span class=\"participant__info-value\">{{ user.date_register ? user.date_register : '&nbsp;' }}</span>\n                        </div>\n                    </div>\n\n                    <div class=\"participant__col participant__col--tel participant__col--separated\">\n                        <div class=\"participant__info\">\n                            <span class=\"participant__info-name\">Телефон</span>\n                            <span class=\"participant__info-value\">\n                                {{ user.phone ? user.phone : '&nbsp;' }}\n                            </span>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"participant__row\">\n                    <div class=\"participant__col participant__col--email\">\n                        <div class=\"participant__info\">\n                            <span class=\"participant__info-name\">Email</span>\n                            <span class=\"participant__info-value participant__info-value--truncate\" :data-tippy-content=\"user.email\" data-show-text>{{ user.email ? user.email : '&nbsp;' }}</span>\n                        </div>\n                    </div>\n                </div>\n                \n                <div v-if=\"accordion\" class=\"participant__row participant__row--toggle\" data-accordeon-toggle>\n                    <p class=\"participant__show\">Подробнее</p>\n                    <button type=\"button\" class=\"accordeon__toggle button button--circular button--mini button--covered button--red-white\" >\n                        <span class=\"accordeon__toggle-icon button__icon\">\n                            <svg class=\"icon icon--arrow-down\">\n                                <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-arrow-down\"></use>\n                            </svg>\n                        </span>\n                    </button>\n                </div>\n            </div>\n\n            <div :class=\"{ 'accordeon__body': accordion, 'accounting__section-box': !accordion, 'section__box': !accordion, 'box': !accordion, 'box--gray': !accordion }\" :data-accordeon-content=\"accordion\">\n                <div v-if=\"!accordion\" class=\"accounting__period filter filter--content\">\n                    <form class=\"accounting__period-form form\">\n                        <div class=\"accounting__period-heading\">\n                            <div class=\"accounting__period-name heading heading--small\">\n                                Выберите период отчета\n                            </div>\n\n                            <div class=\"form__field\">\n                                <div class=\"form__field-block form__field-block--input\">\n                                    <div class=\"form__control\">\n                                        <div class=\"accounting__period-select select select--mitigate select--small select--common\" data-select>\n                                            <select class=\"select__control\" name=\"accounting_periods\" data-select-control data-placeholder=\"Период\">\n                                                <option><!-- пустой option для placeholder --></option>\n                                                <option\n                                                  v-for=\"accountingPeriod in accountingPeriods\"\n                                                  :key=\"accountingPeriod.name\"\n                                                  :selected=\"accountingPeriod.name === currentAccountingPeriod.name\"\n                                                  :value=\"accountingPeriod.from + '-' + accountingPeriod.to\"\n                                                >{{ accountingPeriod.name }}</option>\n                                            </select>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n\n                <div v-if=\"user.is_consultant && Object.entries(this.bonusesIncome).length !== 0\" class=\"accounting__diagramm\" \n                    :hidden=\"!parseInt(mutableBonusesIncome.total)\">\n                    <h5 class=\"accounting__diagramm-title\">{{title}}</h5>\n\n                    <div class=\"diagramm diagramm--simple\">\n                        <div class=\"diagramm__row\">\n                            <div class=\"diagramm__col diagramm__col--diagramm\">\n                                <div class=\"diagramm__main\">\n                                    <canvas\n                                        width=\"227\"\n                                        height=\"227\"\n                                        :id=\"componentId\"\n                                        :data-chart='JSON.stringify(mutableBonusesIncome.js_data)'\n                                        data-chart-type='stats'\n                                    ></canvas>\n                                    <div class=\"diagramm__sum\">\n                                        {{ mutableBonusesIncome.total ? formatNumber(mutableBonusesIncome.total) : 0 }}\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"diagramm__col diagramm__col--sum\">\n                                <p class=\"diagramm__title\">Сумма всех заработанных баллов:</p>\n\n                                <div class=\"diagramm__results\">\n                                    <div\n                                        v-for=\"(bonusesIncome, bonusesIncomeKey) in mutableBonusesIncome.js_data.labels\"\n                                        :key=\"bonusesIncomeKey\"\n                                        class=\"diagramm__result\"\n                                    >\n                                        <span class=\"diagramm__result-icon\" :style=\"{ 'background-color': acceptColor(bonusesIncome) }\"></span>\n                                        <span class=\"diagramm__result-text\">{{ bonusesIncome ? bonusesIncome : 'Не определено' }}</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div v-if=\"user.is_consultant\" class=\"participant__section\">\n                    <h5 class=\"participant__section-title\">\n                        Плановые показатели\n                    </h5>\n\n                    <div class=\"tabs tabs--white tabs--small tabs--circle tabs--red tabs--full-mob\" data-tabs>\n                        <nav class=\"tabs__items\">\n                            <ul class=\"tabs__list\">\n                                <li class=\"tabs__item tabs__item--active\" data-tab=\"block1\">\n                                    Личные\n                                </li>\n\n                                <li class=\"tabs__item\" data-tab=\"block2\">\n                                    Групповые\n                                </li>\n                            </ul>\n                        </nav>\n\n                        <div class=\"tabs__body\">\n                            <!--Таб личные-->\n                            <div class=\"tabs__block tabs__block--active\" data-tab-section=\"block1\">\n                                <div class=\"participant__block\">\n                                    <div class=\"participant__progress cards-progress\">\n                                        <ul class=\"cards-progress__list\">\n                                            <li v-if=\"mutableLoyaltyStatus.self.hold_value\" class=\"cards-progress__item\">\n                                                <LoyaltyStatusTale\n                                                    :current-value=\"mutableLoyaltyStatus.self.current_value\"\n                                                    :target-value=\"mutableLoyaltyStatus.self.hold_value\"\n                                                    label=\"Поддержание уровня по личным покупкам\"\n                                                />\n                                            </li>\n                                            <li class=\"cards-progress__item\">\n                                                <LoyaltyStatusTale\n                                                    :current-value=\"mutableLoyaltyStatus.self.current_value\"\n                                                    :target-value=\"mutableLoyaltyStatus.self.upgrade_value\"\n                                                    :is-hold=\"false\"\n                                                    label=\"Повышение уровня по личным покупкам\"\n                                                />\n                                            </li>\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>\n                            <!--/Таб личные-->\n\n                            <!--Таб групповые-->\n                            <div class=\"tabs__block\" data-tab-section=\"block2\">\n                                <div class=\"participant__block\">\n                                    <div class=\"participant__progress cards-progress\">\n                                        <ul class=\"cards-progress__list\">\n                                            <li v-if=\"mutableLoyaltyStatus.team.hold_value > 0\" class=\"cards-progress__item\">\n                                                <LoyaltyStatusTale\n                                                    :current-value=\"mutableLoyaltyStatus.team.current_value\"\n                                                    :target-value=\"mutableLoyaltyStatus.team.hold_value\"\n                                                    label=\"Поддержание уровня по групповым покупкам\"\n                                                />\n                                            </li>\n                                            <li class=\"cards-progress__item\">\n                                                <LoyaltyStatusTale\n                                                    :current-value=\"mutableLoyaltyStatus.team.current_value\"\n                                                    :target-value=\"mutableLoyaltyStatus.team.upgrade_value\"\n                                                    :is-hold=\"false\"\n                                                    label=\"Повышение уровня по групповым покупкам\"\n                                                />\n                                            </li>\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>\n                            <!--/Таб групповые-->\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"participant__section\">\n                    <h5 class=\"participant__section-title\">\n                        Покупки\n                    </h5>\n\n                    <div class=\"tabs tabs--white tabs--small tabs--circle tabs--red tabs--full-mob\" data-tabs>\n                        <nav v-if=\"user.is_consultant\" class=\"tabs__items\">\n                            <ul class=\"tabs__list\">\n                                <li class=\"tabs__item tabs__item--active\" data-tab=\"block1\">\n                                    Личные\n                                </li>\n\n                                <li class=\"tabs__item\" data-tab=\"block2\">\n                                    Групповые\n                                </li>\n                            </ul>\n                        </nav>\n\n                        <div class=\"tabs__body\">\n                        <template v-if=\"user.is_consultant\">\n                            <!--Таб Личные-->\n                            <div class=\"tabs__block tabs__block--active\" data-tab-section=\"block1\">\n                                <OrdersReport :orders-report=\"mutableOrdersReport.self\" />\n                            </div>\n                            <!--/Таб Личные-->\n\n                            <!--Таб Групповые-->\n                            <div class=\"tabs__block\" data-tab-section=\"block2\">\n                                <OrdersReport :orders-report=\"mutableOrdersReport.team\" :isGroup=\"true\" />\n                            </div>\n                            <!--/Таб Групповые-->\n                        </template>\n                        <template v-else>\n                            <!--Таб Личные-->\n                            <div class=\"tabs__block tabs__block--active\">\n                                <OrdersReport :orders-report=\"mutableOrdersReport.self\" />\n                            </div>\n                            <!--/Таб Личные-->\n                        </template>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div> \n    `\n};","import { useLoyaltySalesReportStore } from '../../../stores/loyaltySalesReportStore';\nimport { LoyaltyReport } from \"../../loyaltyReport/src/component\";\n\nexport const SalesReportPage = {\n    components: { LoyaltyReport },\n\n    data() {\n        return {\n            consultantsSortAsc: true,\n            consultantsSort: 'id',\n            buyersSortAsc: true,\n            buyersSort: 'id',\n            consultantsLoyaltyLevelFilter: [],\n            buyersLoyaltyLevelFilter: [],\n            mutableConsultants: [],\n            mutableBuyers: [],\n        };\n    },\n\n    props: {\n        consultantLoyaltyLevels: {\n            type: Object,\n            required: true,\n        },\n        buyerLoyaltyLevels: {\n            type: Object,\n            required: true,\n        },\n        consultantAccountingPeriods: {\n            type: Array,\n            required: true,\n        },\n        buyerAccountingPeriods: {\n            type: Array,\n            required: true,\n        },\n        currentUser: {\n            type: Object,\n            required: true,\n        },\n        currentAccountingPeriod: {\n            type: Object,\n            required: true,\n        },\n        team: {\n            type: Array,\n            required: true,\n        },\n    },\n\n    setup() {\n        return { loyaltySalesReportStore: useLoyaltySalesReportStore() };\n    },\n\n    computed: {\n        consultantsMembers() {\n            return this.mutableConsultants.filter((consultant) => {\n                return this.consultantsLoyaltyLevelFilter.length\n                    ? this.consultantsLoyaltyLevelFilter.includes(consultant.user_info.loyalty_level)\n                    : true;\n            }).sort((a, b) => {\n                let result, aPrepared, bPrepared, aDate, bDate;\n\n                switch (this.consultantsSort) {\n                    case 'id':\n                        result = this.consultantsSortAsc ? parseInt(a.user_info.id) > parseInt(b.user_info.id) : parseInt(a.user_info.id) < parseInt(b.user_info.id);\n                        break;\n                    case 'loyalty_level':\n                        result = this.consultantsSortAsc ? a.user_info.loyalty_level > b.user_info.loyalty_level : a.user_info.loyalty_level < b.user_info.loyalty_level;\n                        break;\n                    case 'date_register':\n                        aPrepared = a.user_info.date_register.split('.');\n                        bPrepared = b.user_info.date_register.split('.');\n                        aDate = new Date(`${aPrepared[2]}-${aPrepared[1]}-${aPrepared[0]}`);\n                        bDate = new Date(`${bPrepared[2]}-${bPrepared[1]}-${bPrepared[0]}`);\n                        result = this.consultantsSortAsc ? aDate.getTime() > bDate.getTime() : aDate.getTime() < bDate.getTime();\n                        break;\n                    case 'paid_orders':\n                        result = this.consultantsSortAsc ? parseInt(a.orders_report.self.paid_orders_count) > parseInt(b.orders_report.self.paid_orders_count) : parseInt(a.orders_report.self.paid_orders_count) < parseInt(b.orders_report.self.paid_orders_count);\n                        break;\n                    case 'refunded_orders':\n                        result = this.consultantsSortAsc ? parseInt(a.orders_report.self.refunded_orders_count) > parseInt(b.orders_report.self.refunded_orders_count) : parseInt(a.orders_report.self.refunded_orders_count) < parseInt(b.orders_report.self.refunded_orders_count);\n                        break;\n                    case 'total_sum':\n                        result = this.consultantsSortAsc ? parseInt(a.orders_report.self.total_sum) > parseInt(b.orders_report.self.total_sum) : parseInt(a.orders_report.self.total_sum) < parseInt(b.orders_report.self.total_sum);\n                        break;\n                    case 'current_bonuses_count':\n                        result = this.consultantsSortAsc ? parseInt(a.bonuses_income.total) > parseInt(b.bonuses_income.total) : parseInt(a.bonuses_income.total) < parseInt(b.bonuses_income.total);\n                        break;\n                    case 'current_period_sum':\n                        result = this.consultantsSortAsc ? parseInt(a.orders_report.self.current_period_sum) > parseInt(b.orders_report.self.current_period_sum) : parseInt(a.orders_report.self.current_period_sum) < parseInt(b.orders_report.self.current_period_sum);\n                        break;\n                    case 'last_order_date':\n                        aPrepared = a.orders_report.self.last_order_date.split('.');\n                        bPrepared = b.orders_report.self.last_order_date.split('.');\n                        aDate = new Date(`${aPrepared[2]}-${aPrepared[1]}-${aPrepared[0]}`);\n                        bDate = new Date(`${bPrepared[2]}-${bPrepared[1]}-${bPrepared[0]}`);\n                        if (this.consultantsSortAsc) {\n                            if (isNaN(aDate.getTime())) {\n                                result = false;\n                            } else if (isNaN(bDate.getTime())) {\n                                result = true;\n                            }\n                            result = aDate.getTime() > bDate.getTime();\n                        }\n                        if (isNaN(aDate.getTime())) {\n                            result = true;\n                        } else if (isNaN(bDate.getTime())) {\n                            result = false;\n                        }\n                        result = aDate.getTime() < bDate.getTime();\n                        break;\n                    case 'bonuses_count':\n                        result = this.consultantsSortAsc ? parseInt(a.bonuses_income.all_total) > parseInt(b.bonuses_income.all_total) : parseInt(a.bonuses_income.all_total) < parseInt(b.bonuses_income.all_total);\n                        break;\n                }\n                return result ? 1 : -1;\n            });\n        },\n        buyersMembers() {\n            return this.mutableBuyers.filter((buyer) => {\n                return this.buyersLoyaltyLevelFilter.length\n                    ? this.buyersLoyaltyLevelFilter.includes(buyer.user_info.loyalty_level)\n                    : true;\n            }).sort((a, b) => {\n                let result, aPrepared, bPrepared, aDate, bDate;\n\n                switch (this.buyersSort) {\n                    case 'id':\n                        result = this.buyersSortAsc ? parseInt(a.user_info.id) > parseInt(b.user_info.id) : parseInt(a.user_info.id) < parseInt(b.user_info.id);\n                        break;\n                    case 'date_register':\n                        aPrepared = a.user_info.date_register.split('.');\n                        bPrepared = b.user_info.date_register.split('.');\n                        aDate = new Date(`${aPrepared[2]}-${aPrepared[1]}-${aPrepared[0]}`);\n                        bDate = new Date(`${bPrepared[2]}-${bPrepared[1]}-${bPrepared[0]}`);\n                        result = this.buyersSortAsc ? aDate.getTime() > bDate.getTime() : aDate.getTime() < bDate.getTime();\n                        break;\n                    case 'paid_orders':\n                        result = this.buyersSortAsc ? parseInt(a.orders_report.self.paid_orders_count) > parseInt(b.orders_report.self.paid_orders_count) : parseInt(a.orders_report.self.paid_orders_count) < parseInt(b.orders_report.self.paid_orders_count);\n                        break;\n                    case 'refunded_orders':\n                        result = this.buyersSortAsc ? parseInt(a.orders_report.self.refunded_orders_count) > parseInt(b.orders_report.self.refunded_orders_count) : parseInt(a.orders_report.self.refunded_orders_count) < parseInt(b.orders_report.self.refunded_orders_count);\n                        break;\n                    case 'total_sum':\n                        result = this.buyersSortAsc ? parseInt(a.orders_report.self.total_sum) > parseInt(b.orders_report.self.total_sum) : parseInt(a.orders_report.self.total_sum) < parseInt(b.orders_report.self.total_sum);\n                        break;\n                    case 'current_period_sum':\n                        result = this.buyersSortAsc ? parseInt(a.orders_report.self.current_period_sum) > parseInt(b.orders_report.self.current_period_sum) : parseInt(a.orders_report.self.current_period_sum) < parseInt(b.orders_report.self.current_period_sum);\n                        break;\n                    case 'last_order_date':\n                        aPrepared = a.orders_report.self.last_order_date.split('.');\n                        bPrepared = b.orders_report.self.last_order_date.split('.');\n                        aDate = new Date(`${aPrepared[2]}-${aPrepared[1]}-${aPrepared[0]}`);\n                        bDate = new Date(`${bPrepared[2]}-${bPrepared[1]}-${bPrepared[0]}`);\n                        if (this.buyersSortAsc) {\n                            if (isNaN(aDate.getTime())) {\n                                result = false;\n                            } else if (isNaN(bDate.getTime())) {\n                                result = true;\n                            }\n                            result = aDate.getTime() > bDate.getTime();\n                        }\n                        if (isNaN(aDate.getTime())) {\n                            result = true;\n                        } else if (isNaN(bDate.getTime())) {\n                            result = false;\n                        }\n                        result = aDate.getTime() < bDate.getTime();\n                        break;\n                }\n                return result ? 1 : -1;\n            });\n        },\n    },\n\n    created() {\n        this.mutableConsultants = this.team.consultants;\n        this.mutableBuyers = this.team.buyers;\n    },\n\n    mounted() {\n        $('select[name=consultant_loyalty_levels]').on('change', () => {\n            this.consultantsLoyaltyLevelFilter = $('select[name=consultant_loyalty_levels]').val();\n        });\n        $('select[name=buyer_loyalty_levels]').on('change', () => {\n            this.buyersLoyaltyLevelFilter = $('select[name=buyer_loyalty_levels]').val();\n        });\n\n        $('select[name=consultants_sort]').on('change', () => {\n            this.consultantsSort = $('select[name=consultants_sort]').val();\n        });\n        $('select[name=buyers_sort]').on('change', () => {\n            this.buyersSort = $('select[name=buyers_sort]').val();\n        });\n\n        $('select[name=consultant_accounting_periods]').on('change', () => this.changeConsultantAccountingPeriod());\n        $('select[name=buyer_accounting_periods]').on('change', () => this.changeBuyerAccountingPeriod());\n    },\n\n    methods: {\n        async changeConsultantAccountingPeriod() {\n            const period = $('select[name=consultant_accounting_periods]').val().split('-');\n            const response = await this.loyaltySalesReportStore.getTeamMembersDataByPeriod(\n                this.mutableConsultants.map((user) => user.user_info.id),\n                period[0],\n                period[1],\n            );\n            this.mutableConsultants = response.data;\n            for (const i in response.data) {\n                this.$refs[`consultant-${response.data[i].user_info.id}`][0].changeAccountingPeriod(response.data[i]);\n            }\n        },\n        async changeBuyerAccountingPeriod() {\n            const period = $('select[name=buyer_accounting_periods]').val().split('-');\n            const response = await this.loyaltySalesReportStore.getTeamMembersDataByPeriod(\n                this.mutableBuyers.map((user) => user.user_info.id),\n                period[0],\n                period[1],\n            );\n            this.mutableBuyers = response.data;\n            for (const i in response.data) {\n                this.$refs[`buyer-${response.data[i].user_info.id}`][0].changeAccountingPeriod(response.data[i]);\n            }\n        },\n    },\n\n    template: `\n        <div class=\"private__col private__col--full\">\n            <div class=\"accounting\">\n                <section class=\"accounting__section section\">\n                    <div class=\"section__box box\">\n                        <LoyaltyReport\n                            :user=\"currentUser.user_info\"\n                            :orders-report=\"currentUser.orders_report\"\n                            :current-accounting-period=\"currentAccountingPeriod\"\n                            :accounting-periods=\"currentUser.accounting_periods\"\n                            :loyalty-status=\"currentUser.loyalty_status\"\n                            :bonuses-income=\"currentUser.bonuses_income\"\n                        />\n                    </div>\n                </section>\n                \n                <section v-if=\"team.consultants.length || team.buyers.length\" class=\"accounting__section section\">\n                    <div class=\"section__box box\">\n                        <div class=\"section__header\">\n                            <h4 class=\"section__title\">\n                                Участники группы\n                            </h4>\n                        </div>\n\n                        <div class=\"tabs tabs--gray tabs--covered tabs--small tabs--circle tabs--full-mob\" data-tabs>\n                            <nav class=\"accounting__tabs-items tabs__items\">\n                                <ul class=\"tabs__list\">\n                                    <li class=\"tabs__item tabs__item--active\" data-tab=\"block1\">\n                                        Консультанты\n                                        <span>({{ mutableConsultants.length }})</span>\n                                    </li>\n\n                                    <li class=\"tabs__item\" data-tab=\"block2\">\n                                        Покупатели\n                                        <span>({{ mutableBuyers.length }})</span>\n                                    </li>\n                                </ul>\n                            </nav>\n\n                            <div class=\"tabs__body\">\n                                <!--Консультанты-->\n                                <div class=\"tabs__block tabs__block--active\" data-tab-section=\"block1\">\n                                    <div class=\"accounting__block\">\n                                        <div class=\"accounting__filter content__filter filter filter--content\">\n                                            <form class=\"form form--wraped form--separated form--wraped-small\">\n                                                <div class=\"form__row form__row--merged\">\n                                                    <div class=\"form__col form__col--definite\">\n                                                        <div class=\"form__field\">\n                                                            <div class=\"form__field-block form__field-block--input\">\n                                                                <div class=\"form__control\">\n                                                                    <div class=\"filter__select select select--mitigate select--small select--squared select--multiple\" data-select>\n                                                                        <select class=\"select__control\" name=\"consultant_loyalty_levels\" data-select-control data-placeholder=\"Выбрать уровень\" multiple>\n                                                                            <option><!-- пустой option для placeholder --></option>\n                                                                            <option\n                                                                                v-for=\"(level, levelName) in consultantLoyaltyLevels\"\n                                                                                :key=\"levelName\"\n                                                                                :value=\"levelName\"\n                                                                            >{{ levelName }}</option>\n                                                                        </select>\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n\n                                                    <div class=\"form__col form__col--definite\">\n                                                        <div class=\"form__field\">\n                                                            <div class=\"form__field-block form__field-block--input\">\n                                                                <div class=\"form__control\">\n                                                                    <div class=\"filter__select select select--mitigate select--small select--squared\" data-select>\n                                                                        <select class=\"select__control\" name=\"consultant_accounting_periods\" data-select-control data-placeholder=\"Выбрать период\">\n                                                                            <option><!-- пустой option для placeholder --></option>\n                                                                            <option\n                                                                                v-for=\"accountingPeriod in consultantAccountingPeriods\"\n                                                                                :key=\"accountingPeriod.name\"\n                                                                                :value=\"accountingPeriod.from + '-' + accountingPeriod.to\"\n                                                                            >{{ accountingPeriod.name }}</option>\n                                                                        </select>\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n\n                                                    <div class=\"form__col form__col--right form__col--definite\">\n                                                        <div class=\"form__field\">\n                                                            <div class=\"form__field-block form__field-block--input\">\n                                                                <div class=\"form__control\">\n                                                                    <div class=\"filter__sort select select--small select--sorting select--borderless\" data-select>\n                                                                        <select class=\"select__control\" name=\"consultants_sort\" data-select-control data-placeholder=\"Сортировать по\">\n                                                                            <option><!-- пустой option для placeholder --></option>\n                                                                            <option value=\"loyalty_level\">По уровню консультанта</option>\n                                                                            <option value=\"date_register\">По дате регистрации</option>\n                                                                            <option value=\"paid_orders\">По количеству личных заказов со статусом \"Оплачен\"</option>\n                                                                            <option value=\"refunded_orders\">По количеству личных заказов со статусом \"Возврат\"</option>\n                                                                            <option value=\"total_sum\">По сумме всех личных заказов</option>\n                                                                            <option value=\"current_bonuses_count\">По сумме личных баллов за текущий отчетный период</option>\n                                                                            <option value=\"current_period_sum\">По сумме личных заказов за текущий отчетный период</option>\n                                                                            <option value=\"last_order_date\">По дате последнего личного заказа</option>\n                                                                            <option value=\"bonuses_count\">По количеству всех заработанных баллов</option>\n                                                                        </select>\n                            \n                                                                        <button type=\"button\" class=\"input__button input__button--select button button--iconed button--covered button--square button--dark\" @click=\"consultantsSortAsc = !consultantsSortAsc\">\n                                                                            <span class=\"button__icon button__icon--medium\">\n                                                                                <svg class=\"icon icon--sort\">\n                                                                                    <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-sort\"></use>\n                                                                                </svg>\n                                                                            </span>\n                                                                        </button>\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </form>\n                                        </div>\n\n                                        <div class=\"accordeon accordeon--separated\">\n                                            <div class=\"participant\">\n                                                <div class=\"participant__head\">\n                                                    <div class=\"participant__head-item participant__head-item--name\">ФИО</div>\n                                                    <div class=\"participant__head-item participant__head-item--id\">ID</div>\n                                                    <div class=\"participant__head-item participant__head-item--level\">Уровень</div>\n                                                    <div class=\"participant__head-item participant__head-item--date\">На сайте с</div>\n                                                    <div class=\"participant__head-item participant__head-item--tel\">Телефон</div>\n                                                    <div class=\"participant__head-item participant__head-item--email\">Email</div>\n                                                </div>\n\n                                                <LoyaltyReport\n                                                    v-for=\"member in consultantsMembers\"\n                                                    :key=\"member.user_info.id\"\n                                                    :ref=\"'consultant-' + member.user_info.id\"\n                                                    :user=\"member.user_info\"\n                                                    :orders-report=\"member.orders_report\"\n                                                    :current-accounting-period=\"currentAccountingPeriod\"\n                                                    :accounting-periods=\"member.accounting_periods\"\n                                                    :loyalty-status=\"member.loyalty_status\"\n                                                    :bonuses-income=\"member.bonuses_income\"\n                                                    :accordion=\"true\"\n                                                    :title=\"'Заработок Консультанта'\"\n                                                />\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <!--/Консультанты-->\n\n                                <!--Покупатели-->\n                                <div class=\"tabs__block\" data-tab-section=\"block2\">\n                                    <div class=\"accounting__block\">\n                                        <div class=\"accounting__filter content__filter filter filter--content\">\n                                            <form class=\"form form--wraped form--separated form--wraped-small\">\n                                                <div class=\"form__row form__row--merged\">\n\n                                                    <div class=\"form__col form__col--definite\">\n                                                        <div class=\"form__field\">\n                                                            <div class=\"form__field-block form__field-block--input\">\n                                                                <div class=\"form__control\">\n                                                                    <div class=\"filter__select select select--mitigate select--small select--squared\" data-select>\n                                                                        <select class=\"select__control\" name=\"buyer_accounting_periods\" data-select-control data-placeholder=\"Выбрать период\">\n                                                                            <option><!-- пустой option для placeholder --></option>\n                                                                            <option\n                                                                                v-for=\"accountingPeriod in buyerAccountingPeriods\"\n                                                                                :key=\"accountingPeriod.name\"   \n                                                                                :value=\"accountingPeriod.from + '-' + accountingPeriod.to\"\n                                                                            >{{ accountingPeriod.name }}</option>\n                                                                        </select>\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n\n                                                    <div class=\"form__col form__col--right form__col--definite\">\n                                                        <div class=\"form__field\">\n                                                            <div class=\"form__field-block form__field-block--input\">\n                                                                <div class=\"form__control\">\n                                                                    <div class=\"filter__sort select select--small select--sorting select--borderless\" data-select>\n                                                                        <select class=\"select__control\" name=\"buyers_sort\" id=\"buyers_sort\" data-select-control data-placeholder=\"Сортировать по\">\n                                                                            <option><!-- пустой option для placeholder --></option>\n                                                                            <option value=\"date_register\">По дате регистрации</option>\n                                                                            <option value=\"paid_orders\">По количеству личных заказов со статусом \"Оплачен\"</option>\n                                                                            <option value=\"refunded_orders\">По количеству личных заказов со статусом \"Возврат\"</option>\n                                                                            <option value=\"total_sum\">По сумме всех личных заказов</option>\n                                                                            <option value=\"current_period_sum\">По сумме личных заказов за текущий отчетный период</option>\n                                                                            <option value=\"last_order_date\">По дате последнего личного заказа</option>\n                                                                        </select>\n                            \n                                                                        <button type=\"button\" class=\"input__button input__button--select button button--iconed button--covered button--square button--dark\" @click=\"buyersSortAsc = !buyersSortAsc\">\n                                                                            <span class=\"button__icon button__icon--medium\">\n                                                                                <svg class=\"icon icon--sort\">\n                                                                                    <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-sort\"></use>\n                                                                                </svg>\n                                                                            </span>\n                                                                        </button>\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </form>\n                                        </div>\n\n                                        <div class=\"accordeon accordeon--separated\">\n                                            <div class=\"participant\">\n                                                <div class=\"participant__head\">\n                                                    <div class=\"participant__head-item participant__head-item--name\">ФИО</div>\n                                                    <div class=\"participant__head-item participant__head-item--id\">ID</div>\n                                                    <div class=\"participant__head-item participant__head-item--pet\">Питомец</div>\n                                                    <div class=\"participant__head-item participant__head-item--date\">На сайте с</div>\n                                                    <div class=\"participant__head-item participant__head-item--tel\">Телефон</div>\n                                                    <div class=\"participant__head-item participant__head-item--email\">Email</div>\n                                                </div>\n\n                                                <LoyaltyReport\n                                                    v-for=\"member in buyersMembers\"\n                                                    :key=\"member.user_info.id\"\n                                                    :ref=\"'buyer-' + member.user_info.id\"\n                                                    :user=\"member.user_info\"\n                                                    :orders-report=\"member.orders_report\"\n                                                    :current-accounting-period=\"currentAccountingPeriod\"\n                                                    :accounting-periods=\"member.accounting_periods\"\n                                                    :loyalty-status=\"member.loyalty_status\"\n                                                    :accordion=\"true\"\n                                                />\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <!--/Покупатели-->\n                            </div>\n                        </div>\n                    </div>\n                </section>\n            </div>\n        </div>\n    `\n};"],"names":["useLoyaltySalesReportStore","defineStore","actions","getDataByPeriod","from","to","BX","ajax","runComponentAction","mode","data","getTeamMembersDataByPeriod","ids","methods","formatNumber","number","useDecimals","Math","round","parseFloat","result","toFixed","replace","substring","length","LoyaltyStatusTale","mixins","NumberFormatMixin","props","currentValue","type","Number","required","targetValue","label","String","isHold","Boolean","isConsultant","template","OrdersReport","isGroup","label2","ordersReport","Object","showPriceWhole","item","numberFloor","floor","toLocaleString","minimumFractionDigits","showPriceRemains","numberFixed","totalRemains","toString","split","id","LoyaltyReport","components","componentId","mutableLoyaltyStatus","mutableBonusesIncome","mutableOrdersReport","user","currentAccountingPeriod","accountingPeriods","Array","loyaltyStatus","bonusesIncome","accordion","title","setup","loyaltySalesReportStore","created","mounted","$","on","changeAccountingPeriod","acceptColor","period","val","response","loyalty_status","orders_report","bonuses_income","component","diagram","dataChart","js_data","myChart","labels","datasets","backgroundColor","context","value","chart","map","index","update","SalesReportPage","consultantsSortAsc","consultantsSort","buyersSortAsc","buyersSort","consultantsLoyaltyLevelFilter","buyersLoyaltyLevelFilter","mutableConsultants","mutableBuyers","consultantLoyaltyLevels","buyerLoyaltyLevels","consultantAccountingPeriods","buyerAccountingPeriods","currentUser","team","computed","consultantsMembers","filter","consultant","includes","user_info","loyalty_level","sort","a","b","aPrepared","bPrepared","aDate","bDate","parseInt","date_register","Date","getTime","self","paid_orders_count","refunded_orders_count","total_sum","total","current_period_sum","last_order_date","isNaN","all_total","buyersMembers","buyer","consultants","buyers","changeConsultantAccountingPeriod","changeBuyerAccountingPeriod","i","$refs"],"mappings":"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"}