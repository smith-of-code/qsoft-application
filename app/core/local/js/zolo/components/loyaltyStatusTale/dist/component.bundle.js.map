{"version":3,"file":"component.bundle.js","sources":["../../../mixins/NumberFormatMixin.js","../src/component.js"],"sourcesContent":["export default {\n    methods: {\n        formatNumber(number, useDecimals = false) {\n            if (!number) return 0;\n            number = Math.round(parseFloat(number));\n            let result = number.toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g, '$&\\u00A0');\n            return useDecimals ? result : result.substring(0, result.length - 3);\n        },\n    },\n};\n","import NumberFormatMixin from \"../../../mixins/NumberFormatMixin\";\n\nexport const LoyaltyStatusTale = {\n    mixins: [NumberFormatMixin],\n\n    props: {\n        currentValue: {\n            type: Number,\n            required: true,\n        },\n        targetValue: {\n            type: Number,\n            required: true,\n        },\n        label: {\n            type: String,\n            required: true,\n        },\n        isHold: {\n            type: Boolean,\n            default: true,\n        },\n        isConsultant: {\n            type: Boolean,\n            default: true,\n        },\n    },\n\n    template: `\n        <div v-if=\"targetValue > 0\" class=\"card-progress card-progress--unbordered\">\n            <div class=\"card-progress__inner\">\n                <p class=\"card-progress__title\">\n                    {{ label }}\n                </p>\n                <div v-if=\"currentValue / targetValue < 0.5\" class=\"card-progress__mark\">\n                    <svg class=\"card-progress__icon icon icon--cat-serious\">\n                        <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-cat-sad\"></use>\n                    </svg>\n                    <span class=\"card-progress__mark-text\">\n                        Нужно больше усилий\n                    </span>\n                </div>\n                <div v-else-if=\"currentValue / targetValue < 1\" class=\"card-progress__mark\">\n                    <svg class=\"card-progress__icon icon icon--cat-serious\">\n                        <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-cat-serious\"></use>\n                    </svg>\n                    <span class=\"card-progress__mark-text\">\n                        Хорошо получается\n                    </span>\n                </div>\n                <div v-else-if=\"currentValue / targetValue == 1\" class=\"card-progress__mark\">\n                    <svg class=\"card-progress__icon icon icon--cat-serious\">\n                        <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-cat-smile\"></use>\n                    </svg>\n                    <span class=\"card-progress__mark-text\">\n                        Цель достигнута\n                    </span>\n                </div>\n                <div v-else class=\"card-progress__mark\">\n                    <svg class=\"card-progress__icon icon icon--cat-serious\">\n                        <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-cat-happy\"></use>\n                    </svg>\n                    <span class=\"card-progress__mark-text\">\n                        Просто фантастика\n                    </span>\n                </div>\n                <div class=\"card-progress__wrapper\">\n                    <div class=\"card-progress__progress progress-bar\">\n                        <div\n                            class=\"progress-bar__filler\"\n                            :style=\"{ width: ((currentValue * 100 / targetValue) < 100 ? (currentValue * 100 / targetValue) : 100) + '%' }\"\n                            :class=\"{ \n                                'progress-bar__filler--green': targetValue - currentValue <= 0,\n                                'progress-bar__filler--red': targetValue - currentValue > 0,\n                             }\"\n                        ></div>\n                    </div>\n                    <div class=\"card-progress__bottom\">\n                        <div class=\"card-progress__amount amount\">\n                            <p\n                                class=\"amount__target\"\n                                :class=\"{\n                                    'amount__target--green': targetValue - currentValue <= 0,\n                                    'amount__target--red': targetValue - currentValue > 0,\n                                }\"\n                            >\n                                {{ formatNumber(currentValue) }} ₽\n                            </p>\n                            <p class=\"amount__total\">\n                                из {{ formatNumber(targetValue) }} ₽\n                            </p>\n                        </div>\n                        <div v-if=\"targetValue - currentValue > 0\" class=\"card-progress__status\">\n                            <p class=\"card-progress__text\">\n                                Осталось {{ formatNumber(targetValue - currentValue) }}&nbsp;₽\n                            </p>\n                        </div>\n                        <div v-else-if=\"targetValue - currentValue == 0\" class=\"card-progress__status\">\n                            <p class=\"card-progress__text\">\n                                Выполнено\n                            </p>\n                        </div>\n                        <div v-else class=\"card-progress__status\">\n                            <p class=\"card-progress__text\">\n                                Перевыполнено на  {{ formatNumber(currentValue - targetValue) }}&nbsp;₽\n                            </p>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"card-progress__warning warning\">\n                    <div class=\"warning__mark\">\n                        <button type=\"button\" class=\"button button--iconed button--simple button--red\" data-fancybox=\"\" data-modal-type=\"modal\" :data-src=\"isHold ? '#hold-conditions' : '#upgrade-conditions'\">\n                            <span class=\"button__icon\">\n                                <svg class=\"icon icon--basket warning__icon\">\n                                    <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-attention\"></use>\n                                </svg>\n                            </span>\n                        </button>\n                    </div>\n                    \n                    <p class=\"warning__text\">\n                        {{ isHold ? isConsultant ? 'Условия поддержания уровня' : 'Условия удержания скидки' : 'Условия повышения уровня' }}\n                    </p>\n                </div>\n                <article v-if=\"isHold\" id=\"hold-conditions\" class=\"modal modal--full box box--circle box--hanging\" style=\"display: none\">\n                    <div class=\"modal__content\">\n                        <header class=\"modal__section modal__section--header\">\n                            <p class=\"heading heading--average\">Условия поддержания уровня</p>\n                        </header>\n\n                        <section class=\"modal__section modal__section--content\">\n                            <div class=\"conditions\">\n                                <div class=\"conditions__block\">\n                                    <h5 class=\"conditions__title\">\n                                        Условия поддержания уровня для {{isConsultant ? \"К1\" : \"В1\"}}:\n                                    </h5>\n                                    <ul class=\"conditions__list\">\n                                        <li class=\"conditions__item\">\n                                            Совершение личных покупок на общую сумму {{ formatNumber(5000) }} рублей за период в 3 последовательных месяца (квартал);\n                                        </li>\n                                    </ul>\n                                </div>\n\n                                <div class=\"conditions__block\">\n                                    <h5 class=\"conditions__title\">\n                                        Условия поддержания уровня для {{isConsultant ? \"К2\" : \"В2\"}} (единовременное соблюдение всех условий):\n                                    </h5>\n\n                                    <ul class=\"conditions__list\">\n                                        <li class=\"conditions__item\">\n                                            Совершение личных покупок на сумму {{ formatNumber(5000) }} рублей каждый месяц за период в 3 последовательных месяца (квартал);\n                                        </li>\n\n                                        <li class=\"conditions__item\">\n                                            Совершение групповых покупок на сумму {{ formatNumber(7000) }} рублей каждый месяц за период в 3 последовательных месяца (квартал);\n                                        </li>\n                                    </ul>\n\n                                    <p class=\"conditions__text\">Переход на уровень {{isConsultant ? \"К2\" : \"В2\"}} возможен в течение 3 последовательных месяцев при соблюдении условий перехода на уровень {{isConsultant ? \"К2\" : \"В2\"}};\n                                    </p>\n                                    <p class=\"conditions__text\">При несоблюдении условий поддержания уровня {{isConsultant ? \"К2\" : \"В2\"}} будет выполняться переход на уровень {{isConsultant ? \"К1\" : \"В1\"}}.</p>\n                                </div>\n\n                                <div class=\"conditions__block\">\n                                    <h5 class=\"conditions__title\">\n                                        Условия поддержания уровня для {{isConsultant ? \"К3\" : \"В3\"}} (единовременное соблюдение всех условий):\n                                    </h5>\n\n                                    <ul class=\"conditions__list\">\n                                        <li class=\"conditions__item\">\n                                            Совершение личных покупок на сумму {{ formatNumber(10000) }} рублей каждый месяц за период в 3 последовательных месяца (квартал);\n                                        </li>\n\n                                        <li class=\"conditions__item\">\n                                            Совершение групповых покупок на сумму {{ formatNumber(20000) }} рублей каждый месяц за период в 3 последовательных месяца (квартал);\n                                        </li>\n                                    </ul>\n\n                                    <p class=\"conditions__text\">Переход на уровень {{isConsultant ? \"К3\" : \"В3\"}} возможен в течение 6 последовательных месяцев при соблюдении условий перехода на уровень {{isConsultant ? \"К3\" : \"В3\"}};\n\n                                    </p>\n                                    <p class=\"conditions__text\">При несоблюдении условий поддержания уровня {{isConsultant ? \"К3\" : \"В3\"}} будет выполняться переход на уровень {{isConsultant ? \"К2\" : \"В2\"}}.</p>\n                                </div>\n                            </div>\n                        </section>\n                    </div>\n                </article>\n                <article v-else id=\"upgrade-conditions\" class=\"modal modal--full box box--circle box--hanging\" style=\"display: none\">\n                    <div class=\"modal__content\">\n                        <header class=\"modal__section modal__section--header\">\n                            <p class=\"heading heading--average\">Условия повышения уровня</p>\n                        </header>\n\n                        <section class=\"modal__section modal__section--content\">\n                            <div class=\"conditions\">\n                                <div class=\"conditions__block\">\n                                    <h5 class=\"conditions__title\">\n                                        Условия повышения уровня до {{isConsultant ? \"К2\" : \"В2\"}} (единовременное соблюдение всех условий):\n                                    </h5>\n\n                                    <ul class=\"conditions__list\">\n                                        <li class=\"conditions__item\">\n                                            Совершение личных покупок на общую сумму {{ formatNumber(10000) }} рублей за период в 3 последовательных месяца (квартал);\n                                        </li>\n\n                                        <li class=\"conditions__item\">\n                                            Совершение групповых покупок на общую сумму {{ formatNumber(10000) }} рублей за период в 3 последовательных месяца (квартал);\n                                        </li>\n                                    </ul>\n\n                                    <p class=\"conditions__text\">Переход на уровень {{isConsultant ? \"К2\" : \"В2\"}} возможен в течение 3 последовательных месяцев при соблюдении условий перехода на уровень {{isConsultant ? \"К2\" : \"В2\"}};</p>\n                                </div>\n\n                                <div class=\"conditions__block\">\n                                    <h5 class=\"conditions__title\">\n                                        Условия повышения уровня до {{isConsultant ? \"К3\" : \"В3\"}} (единовременное соблюдение всех условий):\n                                    </h5>\n\n                                    <ul class=\"conditions__list\">\n                                        <li class=\"conditions__item\">\n                                            Совершение личных покупок на общую сумму {{ formatNumber(50000) }} рублей за период в 6 последовательных месяца (два последовательных квартала);\n                                        </li>\n\n                                        <li class=\"conditions__item\">\n                                            Совершение групповых покупок на общую сумму {{ formatNumber(100000) }} рублей за период в 6 последовательных месяца (два последовательных квартала);\n                                        </li>\n                                    </ul>\n\n                                    <p class=\"conditions__text\">Переход на уровень {{isConsultant ? \"К3\" : \"В3\"}} возможен в течение 6 последовательных месяцев при соблюдении условий перехода на уровень {{isConsultant ? \"К3\" : \"В3\"}};</p>\n                                </div>\n                            </div>\n                        </section>\n                    </div>\n                </article>\n            </div>\n        </div>\n        <div v-else class=\"card-progress card-progress--success card-progress--unbordered\">\n            <div class=\"card-progress__inner card-progress__inner--columed\">\n                <div class=\"card-progress__image\">\n                    <svg class=\"card-progress__image-pic icon icon--cat-cheerful\">\n                        <use xlink:href=\"/local/templates/.default/images/icons/sprite.svg#icon-cat-cheerful\"></use>\n                    </svg>\n                </div>\n                <p class=\"card-progress__text\">У Вас максимальный уровень</p>\n            </div>\n        </div>\n    `\n};"],"names":["methods","formatNumber","number","useDecimals","Math","round","parseFloat","result","toFixed","replace","substring","length","LoyaltyStatusTale","mixins","NumberFormatMixin","props","currentValue","type","Number","required","targetValue","label","String","isHold","Boolean","isConsultant","template"],"mappings":";;;;AAAA,4BAAe;MACXA,OAAO,EAAE;QACLC,YADK,wBACQC,MADR,EACqC;UAAA,IAArBC,WAAqB,uEAAP,KAAO;UACtC,IAAI,CAACD,MAAL,EAAa,OAAO,CAAP;UACbA,MAAM,GAAGE,IAAI,CAACC,KAAL,CAAWC,UAAU,CAACJ,MAAD,CAArB,CAAT;UACA,IAAIK,MAAM,GAAGL,MAAM,CAACM,OAAP,CAAe,CAAf,EAAkBC,OAAlB,CAA0B,mBAA1B,EAA+C,QAA/C,CAAb;UACA,OAAON,WAAW,GAAGI,MAAH,GAAYA,MAAM,CAACG,SAAP,CAAiB,CAAjB,EAAoBH,MAAM,CAACI,MAAP,GAAgB,CAApC,CAA9B;;;IANG,CAAf;;QCEaC,iBAAiB,GAAG;MAC7BC,MAAM,EAAE,CAACC,iBAAD,CADqB;MAG7BC,KAAK,EAAE;QACHC,YAAY,EAAE;UACVC,IAAI,EAAEC,MADI;UAEVC,QAAQ,EAAE;SAHX;QAKHC,WAAW,EAAE;UACTH,IAAI,EAAEC,MADG;UAETC,QAAQ,EAAE;SAPX;QASHE,KAAK,EAAE;UACHJ,IAAI,EAAEK,MADH;UAEHH,QAAQ,EAAE;SAXX;QAaHI,MAAM,EAAE;UACJN,IAAI,EAAEO,OADF;UAEJ,WAAS;SAfV;QAiBHC,YAAY,EAAE;UACVR,IAAI,EAAEO,OADI;UAEV,WAAS;;OAtBY;MA0B7BE,QAAQ;IA1BqB,CAA1B;;;;;;;;"}